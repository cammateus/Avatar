{"version":3,"sources":["webpack:///./src/constants.js","webpack:///./src/utils.js","webpack:///./src/export.js","webpack:///./src/orbit-controls-utils.js","webpack:///./src/game.js","webpack:///./src/snapshots.js","webpack:///./src/assets.js","webpack:///./src/index.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"names":["findChild","candidates","predicate","length","candidate","shift","concat","children","findChildByName","root","name","o","findChildren","results","push","findChildrenByType","type","traverseWithDepth","object3D","depth","callback","result","i","describe","prefix","indentation","description","JSON","stringify","userData","firstBone","repeat","skeleton","bones","uuid","boneId","describeObject3D","join","loadGLTF","loader","GLTFLoader","url","Promise","resolve","reject","load","gltf","xhr","error","console","log","ensureHubsComponents","gltfExtensions","MOZ_hubs_components","exportGLTF","exporter","GLTFExporter","binary","animations","parse","blob","Blob","el","document","createElement","style","display","href","URL","createObjectURL","download","click","remove","addNonDuplicateAnimationClips","clone","scene","clipsToAdd","clip","findIndex","clonedAnimation","snapTo","controls","target","position","zoom","copy","object","updateProjectionMatrix","dispatchEvent","update","state","DOMContentLoaded","shouldResize","didInit","camera","renderer","envMap","avatarNodes","avatarConfig","newAvatarConfig","shouldApplyNewAvatarConfig","shouldExportAvatar","shouldResetView","shouldSaveView","shouldGoNextView","shouldGoPreviousView","snapshots","x","y","z","viewIndex","async","loadIntoGroup","category","part","group","value","startsWith","clear","add","traverse","obj","fn","material","isMeshStandardMaterial","needsUpdate","Array","isArray","forEach","window","gameState","addEventListener","onresize","constants","e","detail","shouldDeleteView","key","toLowerCase","CustomEvent","requestAnimationFrame","tick","time","THREE","fog","background","innerWidth","innerHeight","set","ambientLight","canvas","getElementById","antialias","sky","Sky","scale","setScalar","uniforms","theta","Math","PI","phi","sun","cos","sin","createSky","skyScene","pmremGenerator","renderTarget","fromScene","dispose","texture","generateEnvironmentMap","floor","rotation","OrbitControls","domElement","saveState","avatarGroup","init","width","parentNode","clientWidth","height","clientHeight","setSize","aspect","categories","Set","Object","keys","avatar","clonedScene","scenes","map","filter","avatarRoots","clonedAvatarRoot","avatarRoot","a","b","assign","clonedSkinnedMeshes","clonedSkeleton","skinnedMesh","boneClones","Map","bone","get","child","cloneSkeleton","bind","cloneIntoAvatar","exportAvatar","reset","createSnapshot","splice","render","AvatarPartSelector","onPartSelected","parts","selected","onChange","selectedOptions","getAttribute","displayName","App","assets","setAssets","useState","initialAssets","generateRandomConfig","newConfig","categoryAssets","excludeFromRandomize","randomIndex","random","initialAvatarConfig","setAvatarConfig","updateAvatarConfig","useEffect","className","selection","onClick","file","files","filename","substring","indexOf","lastIndexOf","id","accept","ReactDOM","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","m","d","definition","defineProperty","enumerable","prop","prototype","hasOwnProperty","call","installedChunks","179","deferredModules","checkDeferredModules","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkId","chunkIds","moreModules","runtime","executeModules","resolves","apply","chunkLoadingGlobal","self","checkDeferredModulesImpl","deferredModule","fulfilled","j","depId","s","startup"],"mappings":"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","file":"main-50df94adac52a08a7035.js","sourcesContent":["export default {\n  avatarConfigChanged: \"avatarConfigChanged\",\n  exportAvatar: \"exportAvatar\",\n  resetView: \"resetView\",\n  saveView: \"saveView\",\n  deleteView: \"deleteView\",\n  goNextView: \"goNextView\",\n  goPreviousView: \"goPreviousView\",\n};\n","import * as THREE from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { Sky } from \"three/examples/jsm/objects/Sky\";\n\nfunction findChild({ candidates, predicate }) {\n  if (!candidates.length) {\n    return null;\n  }\n\n  const candidate = candidates.shift();\n  if (predicate(candidate)) return candidate;\n\n  candidates = candidates.concat(candidate.children);\n  return findChild({ candidates, predicate });\n}\n\nexport function findChildByName(root, name) {\n  return findChild({\n    candidates: [root],\n    predicate: (o) => o.name === name,\n  });\n}\n\nfunction findChildren({ candidates, predicate, results = [] }) {\n  if (!candidates.length) {\n    return results;\n  }\n\n  const candidate = candidates.shift();\n  if (predicate(candidate)) {\n    results.push(candidate);\n  }\n\n  candidates = candidates.concat(candidate.children);\n  return findChildren({ candidates, predicate, results });\n}\n\nexport function findChildrenByType(root, type) {\n  return findChildren({\n    candidates: [root],\n    predicate: (o) => o.type === type,\n  });\n}\n\nfunction traverseWithDepth({ object3D, depth = 0, callback, result }) {\n  result.push(callback(object3D, depth));\n  const children = object3D.children;\n  for (let i = 0; i < children.length; i++) {\n    traverseWithDepth({ object3D: children[i], depth: depth + 1, callback, result });\n  }\n  return result;\n}\n\nconst describe = (function () {\n  const prefix = \"  \";\n  return function describe(object3D, indentation) {\n    const description = `${object3D.type} | ${object3D.name} | ${JSON.stringify(object3D.userData)}`;\n    let firstBone = \"\";\n    if (object3D.type === \"SkinnedMesh\") {\n      firstBone = \"\\n\"\n        .concat(prefix.repeat(indentation))\n        .concat(\"First bone id: \")\n        .concat(object3D.skeleton.bones[0].uuid);\n    }\n    let boneId = \"\";\n    if (object3D.type === \"Bone\") {\n      boneId = \"\\n\".concat(prefix.repeat(indentation)).concat(\"Bone id: \").concat(object3D.uuid);\n    }\n\n    return prefix.repeat(indentation).concat(description).concat(firstBone).concat(boneId);\n  };\n})();\n\nexport function describeObject3D(root) {\n  return traverseWithDepth({ object3D: root, callback: describe, result: [] }).join(\"\\n\");\n}\n\nexport const loadGLTF = (function () {\n  const loader = new GLTFLoader();\n  return function loadGLTF(url) {\n    return new Promise(function (resolve, reject) {\n      loader.load(\n        url,\n        function (gltf) {\n          resolve(gltf);\n          // gltf.animations; // Array<THREE.AnimationClip>\n          // gltf.scene; // THREE.Group\n          // gltf.scenes; // Array<THREE.Group>\n          // gltf.cameras; // Array<THREE.Camera>\n          // gltf.asset; // Object\n        },\n        function (xhr) {\n          // console.log((xhr.loaded / xhr.total) * 100 + \"% loaded\");\n        },\n        function (error) {\n          console.log(\"An error happened\");\n          reject(error);\n        }\n      );\n    });\n  };\n})();\n\nexport function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function generateEnvironmentMap(sky, renderer) {\n  const skyScene = new THREE.Scene();\n  skyScene.add(sky);\n\n  const pmremGenerator = new THREE.PMREMGenerator(renderer);\n  const renderTarget = pmremGenerator.fromScene(skyScene);\n  pmremGenerator.dispose();\n\n  skyScene.remove(sky);\n\n  return renderTarget.texture;\n}\n\nexport function createSky() {\n  const sky = new Sky();\n  sky.scale.setScalar(450000);\n\n  const uniforms = sky.material.uniforms;\n  uniforms[\"turbidity\"].value = 10;\n  uniforms[\"rayleigh\"].value = 3;\n  uniforms[\"mieCoefficient\"].value = 0.005;\n  uniforms[\"mieDirectionalG\"].value = 0.7;\n\n  const inclination = 0.70;\n  const azimuth = 0.55;\n  const theta = Math.PI * (inclination - 0.5);\n  const phi = 2 * Math.PI * (azimuth - 0.5);\n\n  const sun = new THREE.Vector3();\n  sun.x = Math.cos(phi);\n  sun.y = Math.sin(phi) * Math.sin(theta);\n  sun.z = Math.sin(phi) * Math.cos(theta);\n\n  uniforms[\"sunPosition\"].value.copy(sun);\n\n  return sky;\n}\n","import * as THREE from \"three\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter\";\nimport { findChildrenByType, findChildByName, describeObject3D } from \"./utils\";\n\nfunction cloneSkeleton(skinnedMesh) {\n  const boneClones = new Map();\n\n  for (const bone of skinnedMesh.skeleton.bones) {\n    const clone = bone.clone(false);\n    boneClones.set(bone, clone);\n  }\n\n  // Preserve original bone structure\n  // Assume bones[0] is root bone\n  skinnedMesh.skeleton.bones[0].traverse((o) => {\n    if (o.type !== \"Bone\") return;\n    const clone = boneClones.get(o);\n    for (const child of o.children) {\n      clone.add(boneClones.get(child));\n    }\n  });\n\n  return new THREE.Skeleton(skinnedMesh.skeleton.bones.map((b) => boneClones.get(b)));\n}\n\nfunction ensureHubsComponents(userData) {\n  if (!userData.gltfExtensions) {\n    userData.gltfExtensions = {};\n  }\n  if (!userData.gltfExtensions.MOZ_hubs_components) {\n    userData.gltfExtensions.MOZ_hubs_components = {};\n  }\n  return userData;\n}\n\nexport function combineHubsComponents(a, b) {\n  ensureHubsComponents(a);\n  ensureHubsComponents(b);\n  if (a.gltfExtensions.MOZ_hubs_components)\n    // TODO: Deep merge\n    a.gltfExtensions.MOZ_hubs_components = Object.assign(\n      a.gltfExtensions.MOZ_hubs_components,\n      b.gltfExtensions.MOZ_hubs_components\n    );\n\n  return a;\n}\n\nexport const exportGLTF = (function () {\n  const exporter = new GLTFExporter();\n  return function exportGLTF(object3D, { binary, animations }) {\n    exporter.parse(\n      object3D,\n      (gltf) => {\n        if (binary) {\n          const blob = new Blob([gltf], { type: \"application/octet-stream\" });\n          const el = document.createElement(\"a\");\n          el.style.display = \"none\";\n          el.href = URL.createObjectURL(blob);\n          el.download = \"custom_avatar.glb\";\n          el.click();\n          el.remove();\n        } else {\n          console.log(gltf);\n        }\n      },\n      { binary, animations }\n    );\n  };\n})();\n\nfunction addNonDuplicateAnimationClips(clone, scene) {\n  const clipsToAdd = [];\n\n  for (const clip of scene.animations) {\n    const index = clone.animations.findIndex((clonedAnimation) => {\n      return clonedAnimation.name === clip.name;\n    });\n    if (index === -1) {\n      clipsToAdd.push(clip);\n    }\n  }\n\n  for (const clip of clipsToAdd) {\n    clone.animations.push(clip);\n  }\n}\n\nfunction cloneIntoAvatar(avatarGroup) {\n  const clonedScene = new THREE.Group();\n  clonedScene.name = \"Scene\";\n\n  // Combine the root \"Scene\" nodes\n  const scenes = avatarGroup.children\n    .map((o) => {\n      return findChildByName(o, \"Scene\");\n    })\n    .filter((o) => !!o);\n  for (const scene of scenes) {\n    addNonDuplicateAnimationClips(clonedScene, scene);\n  }\n\n  // Combine the \"AvatarRoot\" nodes\n  const avatarRoots = avatarGroup.children\n    .map((o) => {\n      return findChildByName(o, \"AvatarRoot\");\n    })\n    .filter((o) => !!o);\n  const clonedAvatarRoot = avatarRoots[0].clone(false);\n  for (const avatarRoot of avatarRoots) {\n    clonedAvatarRoot.userData = combineHubsComponents(clonedAvatarRoot.userData, avatarRoot.userData);\n  }\n\n  // Clone skinned meshes, bind them to a new skeleton\n  const clonedSkinnedMeshes = findChildrenByType(avatarGroup, \"SkinnedMesh\").map((o) => {\n    return o.clone(false);\n  });\n  const clonedSkeleton = cloneSkeleton(clonedSkinnedMeshes[0]);\n  for (const skinnedMesh of clonedSkinnedMeshes) {\n    skinnedMesh.bind(clonedSkeleton);\n  }\n\n  // Combine clones\n  clonedScene.add(clonedAvatarRoot);\n  clonedAvatarRoot.add(clonedSkeleton.bones[0]); // Assume bones[0] is root bone\n  for (const skinnedMesh of clonedSkinnedMeshes) {\n    clonedAvatarRoot.add(skinnedMesh);\n  }\n  return clonedScene;\n}\n\nexport function exportAvatar(avatarGroup) {\n  const avatar = cloneIntoAvatar(avatarGroup);\n  console.log(describeObject3D(avatar));\n  console.log(avatar);\n  exportGLTF(avatar, { binary: false, animations: avatar.animations });\n  exportGLTF(avatar, { binary: true, animations: avatar.animations });\n}\n","// Helper function that I wish was on OrbitControls\nexport function createSnapshot(controls) {\n  return {\n    target: controls.target.clone(),\n    position: controls.object.position.clone(),\n    zoom: controls.object.zoom,\n  };\n}\n\n// Helper function that I wish was on OrbitControls\nexport function snapTo(controls, { target, position, zoom = 1 }) {\n  controls.target.copy(target);\n  controls.object.position.copy(position);\n  controls.object.zoom = zoom;\n\n  controls.object.updateProjectionMatrix();\n  controls.dispatchEvent({ type: \"change\" });\n\n  controls.update();\n}\n","import * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter\";\nimport constants from \"./constants\";\nimport { exportAvatar } from \"./export\";\nimport { loadGLTF, forEachMaterial, generateEnvironmentMap, createSky } from \"./utils\";\nimport { createSnapshot, snapTo } from \"./orbit-controls-utils\";\nimport initialSnapshots from \"./snapshots\";\n\n// TODO: Don't do this\nfunction urlFor(value) {\n  if (value.startsWith(\"blob\")) {\n    return value;\n  } else {\n    return `assets/${value}.glb`;\n  }\n}\n\nconst state = {\n  DOMContentLoaded: false,\n  shouldResize: true,\n  didInit: false,\n  scene: null,\n  camera: null,\n  renderer: null,\n  controls: null,\n  envMap: null,\n  avatarNodes: {},\n  avatarConfig: {},\n  newAvatarConfig: {},\n  shouldApplyNewAvatarConfig: false,\n  shouldExportAvatar: false,\n  shouldResetView: false,\n  shouldSaveView: false,\n  shouldGoNextView: false,\n  shouldGoPreviousView: false,\n  snapshots: initialSnapshots,\n  viewIndex: 0,\n};\nwindow.gameState = state;\n\nwindow.addEventListener(\"DOMContentLoaded\", () => {\n  state.DOMContentLoaded = true;\n});\nwindow.onresize = () => {\n  state.shouldResize = true;\n};\ndocument.addEventListener(constants.avatarConfigChanged, (e) => {\n  state.newAvatarConfig = e.detail.avatarConfig;\n  state.shouldApplyNewAvatarConfig = true;\n});\ndocument.addEventListener(constants.exportAvatar, () => {\n  state.shouldExportAvatar = true;\n});\ndocument.addEventListener(constants.resetView, () => {\n  state.shouldResetView = true;\n});\ndocument.addEventListener(constants.saveView, () => {\n  state.shouldSaveView = true;\n});\ndocument.addEventListener(constants.deleteView, () => {\n  state.shouldDeleteView = true;\n});\ndocument.addEventListener(constants.goNextView, () => {\n  state.shouldGoNextView = true;\n});\ndocument.addEventListener(constants.goPreviousView, () => {\n  state.shouldGoPreviousView = true;\n});\ndocument.addEventListener(\"keydown\", (e) => {\n  switch (e.key.toLowerCase()) {\n    case \"s\":\n      document.dispatchEvent(new CustomEvent(constants.saveView));\n      break;\n    case \"d\":\n      document.dispatchEvent(new CustomEvent(constants.deleteView));\n      break;\n    case \"k\":\n      document.dispatchEvent(new CustomEvent(constants.goPreviousView));\n      break;\n    case \"j\":\n      document.dispatchEvent(new CustomEvent(constants.goNextView));\n      break;\n  }\n});\n\nfunction resetView() {\n  state.controls.reset();\n}\n\nfunction init() {\n  THREE.Cache.enabled = true;\n\n  const scene = new THREE.Scene();\n  scene.fog = new THREE.FogExp2(0x8b8b8a, 0.2);\n  scene.background = new THREE.Color(0x8b8b8a);\n  state.scene = scene;\n\n  const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  camera.position.set(0, 0.25, 1.5);\n  state.camera = camera;\n\n  const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);\n  scene.add(ambientLight);\n\n  // TODO: Square this with react\n  const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById(\"scene\"), antialias: true });\n  state.renderer = renderer;\n\n  const sky = createSky();\n  state.envMap = generateEnvironmentMap(sky, renderer);\n\n  const floor = new THREE.Mesh(new THREE.PlaneBufferGeometry(100, 100), new THREE.MeshStandardMaterial());\n  floor.position.y = -0.2;\n  floor.rotation.x = -Math.PI / 2;\n  scene.add(floor);\n\n  const controls = new OrbitControls(camera, renderer.domElement);\n  controls.target = new THREE.Vector3(0, 0.5, 0);\n  controls.update();\n  controls.saveState();\n  state.controls = controls;\n\n  state.avatarGroup = new THREE.Group();\n  scene.add(state.avatarGroup);\n}\n\nasync function loadIntoGroup(category, part, group) {\n  const gltf = await loadGLTF(urlFor(part));\n  if (state.avatarConfig[category] !== part) return;\n\n  // TODO: Multiple of these might be in flight at any given time.\n  gltf.scene.animations = gltf.animations;\n  group.clear();\n  group.add(gltf.scene);\n\n  gltf.scene.traverse((obj) => {\n    forEachMaterial(obj, (material) => {\n      if (material.isMeshStandardMaterial) {\n        material.envMap = state.envMap;\n        material.needsUpdate = true;\n      }\n    });\n  });\n}\n\nfunction tick(time) {\n  {\n    if (state.DOMContentLoaded && !state.didInit) {\n      state.didInit = true;\n      init();\n    }\n    if (!state.didInit) {\n      requestAnimationFrame(tick);\n      return;\n    }\n  }\n\n  {\n    if (state.shouldResize) {\n      state.shouldResize = false;\n      const { renderer, camera } = state;\n\n      const width = renderer.domElement.parentNode.clientWidth;\n      const height = renderer.domElement.parentNode.clientHeight;\n      renderer.setSize(width, height, false);\n      camera.aspect = width / height;\n      camera.updateProjectionMatrix();\n    }\n  }\n\n  {\n    if (state.shouldApplyNewAvatarConfig) {\n      state.shouldApplyNewAvatarConfig = false;\n\n      const categories = new Set(Object.keys(state.newAvatarConfig).concat(Object.keys(state.avatarConfig)));\n\n      for (const category of categories) {\n        if (!state.avatarNodes[category]) {\n          state.avatarNodes[category] = new THREE.Group();\n          state.avatarGroup.add(state.avatarNodes[category]);\n        }\n\n        if (state.newAvatarConfig[category] !== state.avatarConfig[category]) {\n          if (state.newAvatarConfig[category] !== null) {\n            loadIntoGroup(category, state.newAvatarConfig[category], state.avatarNodes[category]);\n          } else {\n            state.avatarNodes[category].clear();\n          }\n          state.avatarConfig[category] = state.newAvatarConfig[category];\n        }\n      }\n    }\n  }\n\n  {\n    if (state.shouldExportAvatar) {\n      state.shouldExportAvatar = false;\n      exportAvatar(state.avatarGroup);\n    }\n  }\n\n  {\n    if (state.shouldResetView) {\n      state.shouldResetView = false;\n      resetView();\n    }\n  }\n\n  if (state.shouldSaveView) {\n    state.shouldSaveView = false;\n    const { snapshots, controls } = state;\n    snapshots.push(createSnapshot(controls));\n    state.viewIndex = snapshots.length - 1;\n  }\n  if (state.shouldDeleteView) {\n    state.shouldDeleteView = false;\n    const { snapshots, controls } = state;\n    if (snapshots.length && state.viewIndex < snapshots.length) {\n      snapshots.splice(state.viewIndex, 1);\n      state.shouldGoPreviousView = true;\n    }\n  }\n\n  if (state.shouldGoNextView) {\n    state.shouldGoNextView = false;\n    const { snapshots, controls } = state;\n    if (snapshots.length) {\n      state.viewIndex = (state.viewIndex + 1) % snapshots.length;\n      snapTo(controls, snapshots[state.viewIndex]);\n    }\n  }\n  if (state.shouldGoPreviousView) {\n    state.shouldGoPreviousView = false;\n    const { snapshots, controls } = state;\n    if (snapshots.length) {\n      state.viewIndex = (state.viewIndex + snapshots.length - 1) % snapshots.length;\n      snapTo(controls, snapshots[state.viewIndex]);\n    }\n  }\n\n  {\n    const { renderer, scene, camera } = state;\n    renderer.render(scene, camera);\n  }\n\n  {\n    window.requestAnimationFrame(tick);\n  }\n}\n\nwindow.requestAnimationFrame(tick);\n","export default [\n  { target: { x: 0, y: 0.5, z: 0 }, position: { x: 0, y: 0.25, z: 1.5 }, zoom: 1 },\n  {\n    target: { x: 0.02307116018084527, y: 0.6334402516427525, z: 0.022240041940458772 },\n    position: { x: 0.02307116018084527, y: 0.5176174441028143, z: 0.7171768871800882 },\n    zoom: 1,\n  },\n  {\n    target: { x: 0.09387002157314916, y: 0.546635562471844, z: 0.08014199094868098 },\n    position: { x: -0.3879717518873724, y: 0.4947348350813956, z: 0.5914999491959408 },\n    zoom: 1,\n  },\n  {\n    target: { x: -0.09493661261301585, y: 0.5639529591055843, z: 0.1055502022610856 },\n    position: { x: -0.671104818392942, y: 1.0921215489830267, z: -0.6936061291504049 },\n    zoom: 1,\n  },\n  {\n    target: { x: -0.008422856623338703, y: 0.4941459483505538, z: 0.10198716075212154 },\n    position: { x: -0.011493544628165472, y: 0.5417760987144405, z: -0.9057404120118234 },\n    zoom: 1,\n  },\n  {\n    target: { x: -0.008422856623338703, y: 0.4941459483505538, z: 0.10198716075212154 },\n    position: { x: 0.9967533644672771, y: 0.5785843629152699, z: 0.1188347112272661 },\n    zoom: 1,\n  },\n  {\n    target: { x: 0.04413113687842558, y: 0.49809272819211714, z: 0.06414813223383779 },\n    position: { x: 0.42686384587556403, y: 0.5905893343933903, z: 0.6053669965717776 },\n    zoom: 1,\n  },\n  {\n    target: { x: 0.41859185291264084, y: 0.31485181426204567, z: -0.08600123811976045 },\n    position: { x: 0.6482708508647577, y: 0.4157154496534844, z: 0.22650580642214352 },\n    zoom: 1,\n  },\n  {\n    target: { x: 0.018173720594482693, y: 0.44480533951578716, z: -0.15500048584516604 },\n    position: { x: 0.001957996317477624, y: 0.8078606430954935, z: 0.7318399779720074 },\n    zoom: 1,\n  },\n  { target: { x: 0, y: 0.5, z: 0 }, position: { x: 0, y: 0.35779997693088517, z: 0.8532001384146891 }, zoom: 1 },\n];\n","export default {\n  \"Accessory\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": false\n    },\n    {\n      \"value\": \"accessory_duck-floaty\",\n      \"displayName\": \"Duck Floaty\"\n    },\n    {\n      \"value\": \"accessory_face-mask-1-animated\",\n      \"displayName\": \"Face Mask 1 Animated\"\n    },\n    {\n      \"value\": \"accessory_headband-cat-ears-1\",\n      \"displayName\": \"Headband Cat Ears 1\"\n    },\n    {\n      \"value\": \"accessory_headphones-1-black\",\n      \"displayName\": \"Headphones 1 Black\"\n    },\n    {\n      \"value\": \"accessory_pool-mask-1\",\n      \"displayName\": \"Pool Mask 1\"\n    }\n  ],\n  \"Earring\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": false\n    },\n    {\n      \"value\": \"earring_hoop-high-left-silver\",\n      \"displayName\": \"Hoop High Left Silver\"\n    },\n    {\n      \"value\": \"earring_hoop-high-right-silver\",\n      \"displayName\": \"Hoop High Right Silver\"\n    },\n    {\n      \"value\": \"earring_hoop-large-both-gold\",\n      \"displayName\": \"Hoop Large Both Gold\"\n    },\n    {\n      \"value\": \"earring_hoop-small-both-gold\",\n      \"displayName\": \"Hoop Small Both Gold\"\n    }\n  ],\n  \"Eyebrows\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": true\n    },\n    {\n      \"value\": \"eyebrows_brown\",\n      \"displayName\": \"Brown\"\n    }\n  ],\n  \"Eyes\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": true\n    },\n    {\n      \"value\": \"eyes_style-1-blue\",\n      \"displayName\": \"Style 1 Blue\"\n    },\n    {\n      \"value\": \"eyes_style-1-brown\",\n      \"displayName\": \"Style 1 Brown\"\n    },\n    {\n      \"value\": \"eyes_style-11-blue\",\n      \"displayName\": \"Style 11 Blue\"\n    },\n    {\n      \"value\": \"eyes_style-11-brown\",\n      \"displayName\": \"Style 11 Brown\"\n    },\n    {\n      \"value\": \"eyes_style-12-blue\",\n      \"displayName\": \"Style 12 Blue\"\n    },\n    {\n      \"value\": \"eyes_style-12-brown\",\n      \"displayName\": \"Style 12 Brown\"\n    },\n    {\n      \"value\": \"eyes_style-12-green\",\n      \"displayName\": \"Style 12 Green\"\n    },\n    {\n      \"value\": \"eyes_style-13-blue\",\n      \"displayName\": \"Style 13 Blue\"\n    },\n    {\n      \"value\": \"eyes_style-13-brown\",\n      \"displayName\": \"Style 13 Brown\"\n    },\n    {\n      \"value\": \"eyes_style-14-blue\",\n      \"displayName\": \"Style 14 Blue\"\n    },\n    {\n      \"value\": \"eyes_style-14-brown\",\n      \"displayName\": \"Style 14 Brown\"\n    }\n  ],\n  \"Eyewear\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": false\n    },\n    {\n      \"value\": \"eyewear_arnette\",\n      \"displayName\": \"Arnette\"\n    },\n    {\n      \"value\": \"eyewear_aviators1\",\n      \"displayName\": \"Aviators1\"\n    },\n    {\n      \"value\": \"eyewear_glam-2\",\n      \"displayName\": \"Glam 2\"\n    },\n    {\n      \"value\": \"eyewear_heart-1-pink\",\n      \"displayName\": \"Heart 1 Pink\"\n    },\n    {\n      \"value\": \"eyewear_metal-1\",\n      \"displayName\": \"Metal 1\"\n    },\n    {\n      \"value\": \"eyewear_oakleys-red\",\n      \"displayName\": \"Oakleys Red\"\n    },\n    {\n      \"value\": \"eyewear_punk-2\",\n      \"displayName\": \"Punk 2\"\n    },\n    {\n      \"value\": \"eyewear_wire-frame-1-gold\",\n      \"displayName\": \"Wire Frame 1 Gold\"\n    }\n  ],\n  \"Facial Hair\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": false\n    },\n    {\n      \"value\": \"facial-hair_beard-full-1-dark\",\n      \"displayName\": \"Beard Full 1 Dark\"\n    },\n    {\n      \"value\": \"facial-hair_beard-full-2-brown\",\n      \"displayName\": \"Beard Full 2 Brown\"\n    },\n    {\n      \"value\": \"facial-hair_goatee-1-brown\",\n      \"displayName\": \"Goatee 1 Brown\"\n    },\n    {\n      \"value\": \"facial-hair_goatee-2\",\n      \"displayName\": \"Goatee 2\"\n    },\n    {\n      \"value\": \"facial-hair_goatee-3\",\n      \"displayName\": \"Goatee 3\"\n    },\n    {\n      \"value\": \"facial-hair_goatee-4\",\n      \"displayName\": \"Goatee 4\"\n    },\n    {\n      \"value\": \"facial-hair_goatee-5\",\n      \"displayName\": \"Goatee 5\"\n    },\n    {\n      \"value\": \"facial-hair_mustache-1\",\n      \"displayName\": \"Mustache 1\"\n    },\n    {\n      \"value\": \"facial-hair_mustache-2\",\n      \"displayName\": \"Mustache 2\"\n    }\n  ],\n  \"Hair\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": false\n    },\n    {\n      \"value\": \"hair_aLine-asym\",\n      \"displayName\": \"ALine Asym\"\n    },\n    {\n      \"value\": \"hair_afro-1\",\n      \"displayName\": \"Afro 1\"\n    },\n    {\n      \"value\": \"hair_afro-2\",\n      \"displayName\": \"Afro 2\"\n    },\n    {\n      \"value\": \"hair_bob-1-dark\",\n      \"displayName\": \"Bob 1 Dark\"\n    },\n    {\n      \"value\": \"hair_bob-1-light\",\n      \"displayName\": \"Bob 1 Light\"\n    },\n    {\n      \"value\": \"hair_bob-1-red\",\n      \"displayName\": \"Bob 1 Red\"\n    },\n    {\n      \"value\": \"hair_braided-bun\",\n      \"displayName\": \"Braided Bun\"\n    },\n    {\n      \"value\": \"hair_eraser-top\",\n      \"displayName\": \"Eraser Top\"\n    },\n    {\n      \"value\": \"hair_fauxhawk-1\",\n      \"displayName\": \"Fauxhawk 1\"\n    },\n    {\n      \"value\": \"hair_flat-top-1\",\n      \"displayName\": \"Flat Top 1\"\n    },\n    {\n      \"value\": \"hair_french-braid-buns\",\n      \"displayName\": \"French Braid Buns\"\n    },\n    {\n      \"value\": \"hair_french-braids-double\",\n      \"displayName\": \"French Braids Double\"\n    },\n    {\n      \"value\": \"hair_male_taperAfro1\",\n      \"displayName\": \"Male\"\n    },\n    {\n      \"value\": \"hair_mohawk-1-blue\",\n      \"displayName\": \"Mohawk 1 Blue\"\n    },\n    {\n      \"value\": \"hair_mullet-1-dark\",\n      \"displayName\": \"Mullet 1 Dark\"\n    },\n    {\n      \"value\": \"hair_parted-1-brown\",\n      \"displayName\": \"Parted 1 Brown\"\n    },\n    {\n      \"value\": \"hair_parted-1-gray\",\n      \"displayName\": \"Parted 1 Gray\"\n    },\n    {\n      \"value\": \"hair_parted-long-1\",\n      \"displayName\": \"Parted Long 1\"\n    },\n    {\n      \"value\": \"hair_pigtails-1-blue\",\n      \"displayName\": \"Pigtails 1 Blue\"\n    },\n    {\n      \"value\": \"hair_pigtails-1-pink\",\n      \"displayName\": \"Pigtails 1 Pink\"\n    },\n    {\n      \"value\": \"hair_pony-tail-1\",\n      \"displayName\": \"Pony Tail 1\"\n    },\n    {\n      \"value\": \"hair_pony-tail-2\",\n      \"displayName\": \"Pony Tail 2\"\n    },\n    {\n      \"value\": \"hair_pony-tail-3\",\n      \"displayName\": \"Pony Tail 3\"\n    },\n    {\n      \"value\": \"hair_spikey-1\",\n      \"displayName\": \"Spikey 1\"\n    },\n    {\n      \"value\": \"hair_starter-locs-red\",\n      \"displayName\": \"Starter Locs Red\"\n    }\n  ],\n  \"Hands\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": true\n    },\n    {\n      \"value\": \"hands_skin-1\",\n      \"displayName\": \"Skin 1\"\n    },\n    {\n      \"value\": \"hands_skin-2\",\n      \"displayName\": \"Skin 2\"\n    },\n    {\n      \"value\": \"hands_skin-3\",\n      \"displayName\": \"Skin 3\"\n    },\n    {\n      \"value\": \"hands_skin-4\",\n      \"displayName\": \"Skin 4\"\n    },\n    {\n      \"value\": \"hands_skin-5\",\n      \"displayName\": \"Skin 5\"\n    },\n    {\n      \"value\": \"hands_skin-6\",\n      \"displayName\": \"Skin 6\"\n    },\n    {\n      \"value\": \"hands_skin-7\",\n      \"displayName\": \"Skin 7\"\n    },\n    {\n      \"value\": \"hands_skin-8\",\n      \"displayName\": \"Skin 8\"\n    },\n    {\n      \"value\": \"hands_skin-a\",\n      \"displayName\": \"Skin A\"\n    },\n    {\n      \"value\": \"hands_skin-b\",\n      \"displayName\": \"Skin B\"\n    },\n    {\n      \"value\": \"hands_skin-c\",\n      \"displayName\": \"Skin C\"\n    },\n    {\n      \"value\": \"hands_skin-d\",\n      \"displayName\": \"Skin D\"\n    },\n    {\n      \"value\": \"hands_skin-e\",\n      \"displayName\": \"Skin E\"\n    },\n    {\n      \"value\": \"hands_skin-f\",\n      \"displayName\": \"Skin F\"\n    },\n    {\n      \"value\": \"hands_skin-g\",\n      \"displayName\": \"Skin G\"\n    },\n    {\n      \"value\": \"hands_skin-h\",\n      \"displayName\": \"Skin H\"\n    }\n  ],\n  \"Hat\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": false\n    },\n    {\n      \"value\": \"hat_baseball-giants\",\n      \"displayName\": \"Baseball Giants\"\n    },\n    {\n      \"value\": \"hat_beach-umbrella\",\n      \"displayName\": \"Beach Umbrella\"\n    },\n    {\n      \"value\": \"hat_beanie-1-red\",\n      \"displayName\": \"Beanie 1 Red\"\n    },\n    {\n      \"value\": \"hat_spokemon\",\n      \"displayName\": \"Spokemon\"\n    },\n    {\n      \"value\": \"hat_top-hat-1\",\n      \"displayName\": \"Top Hat 1\"\n    }\n  ],\n  \"Head\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": true\n    },\n    {\n      \"value\": \"head_skin-1\",\n      \"displayName\": \"Skin 1\"\n    },\n    {\n      \"value\": \"head_skin-2\",\n      \"displayName\": \"Skin 2\"\n    },\n    {\n      \"value\": \"head_skin-3\",\n      \"displayName\": \"Skin 3\"\n    },\n    {\n      \"value\": \"head_skin-4\",\n      \"displayName\": \"Skin 4\"\n    },\n    {\n      \"value\": \"head_skin-5\",\n      \"displayName\": \"Skin 5\"\n    },\n    {\n      \"value\": \"head_skin-6\",\n      \"displayName\": \"Skin 6\"\n    },\n    {\n      \"value\": \"head_skin-7\",\n      \"displayName\": \"Skin 7\"\n    },\n    {\n      \"value\": \"head_skin-8\",\n      \"displayName\": \"Skin 8\"\n    },\n    {\n      \"value\": \"head_skin-a\",\n      \"displayName\": \"Skin A\"\n    },\n    {\n      \"value\": \"head_skin-b\",\n      \"displayName\": \"Skin B\"\n    },\n    {\n      \"value\": \"head_skin-c\",\n      \"displayName\": \"Skin C\"\n    },\n    {\n      \"value\": \"head_skin-d\",\n      \"displayName\": \"Skin D\"\n    },\n    {\n      \"value\": \"head_skin-e\",\n      \"displayName\": \"Skin E\"\n    },\n    {\n      \"value\": \"head_skin-f\",\n      \"displayName\": \"Skin F\"\n    },\n    {\n      \"value\": \"head_skin-g\",\n      \"displayName\": \"Skin G\"\n    },\n    {\n      \"value\": \"head_skin-h\",\n      \"displayName\": \"Skin H\"\n    }\n  ],\n  \"Mouth\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": true\n    },\n    {\n      \"value\": \"mouth_neutral-skin-1\",\n      \"displayName\": \"Neutral Skin 1\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-2\",\n      \"displayName\": \"Neutral Skin 2\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-3\",\n      \"displayName\": \"Neutral Skin 3\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-4\",\n      \"displayName\": \"Neutral Skin 4\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-5\",\n      \"displayName\": \"Neutral Skin 5\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-7\",\n      \"displayName\": \"Neutral Skin 7\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-8\",\n      \"displayName\": \"Neutral Skin 8\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-a\",\n      \"displayName\": \"Neutral Skin A\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-b\",\n      \"displayName\": \"Neutral Skin B\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-c\",\n      \"displayName\": \"Neutral Skin C\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-d\",\n      \"displayName\": \"Neutral Skin D\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-e\",\n      \"displayName\": \"Neutral Skin E\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-f\",\n      \"displayName\": \"Neutral Skin F\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-g\",\n      \"displayName\": \"Neutral Skin G\"\n    },\n    {\n      \"value\": \"mouth_neutral-skin-h\",\n      \"displayName\": \"Neutral Skin H\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-1\",\n      \"displayName\": \"Smirk Skin 1\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-2\",\n      \"displayName\": \"Smirk Skin 2\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-3\",\n      \"displayName\": \"Smirk Skin 3\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-4\",\n      \"displayName\": \"Smirk Skin 4\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-5\",\n      \"displayName\": \"Smirk Skin 5\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-6\",\n      \"displayName\": \"Smirk Skin 6\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-7\",\n      \"displayName\": \"Smirk Skin 7\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-8\",\n      \"displayName\": \"Smirk Skin 8\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-a\",\n      \"displayName\": \"Smirk Skin A\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-b\",\n      \"displayName\": \"Smirk Skin B\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-c\",\n      \"displayName\": \"Smirk Skin C\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-d\",\n      \"displayName\": \"Smirk Skin D\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-e\",\n      \"displayName\": \"Smirk Skin E\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-f\",\n      \"displayName\": \"Smirk Skin F\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-g\",\n      \"displayName\": \"Smirk Skin G\"\n    },\n    {\n      \"value\": \"mouth_smirk-skin-h\",\n      \"displayName\": \"Smirk Skin H\"\n    }\n  ],\n  \"Torso Jacket\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": false\n    },\n    {\n      \"value\": \"torso-jacket_style-1-punk-leather-1-black\",\n      \"displayName\": \"Style 1 Punk Leather 1 Black\"\n    }\n  ],\n  \"Torso\": [\n    {\n      \"value\": null,\n      \"displayName\": \"none\",\n      \"excludeFromRandomize\": true\n    },\n    {\n      \"value\": \"torso_style-1-baseball-giants\",\n      \"displayName\": \"Style 1 Baseball Giants\"\n    },\n    {\n      \"value\": \"torso_style-1-bowling-shirt-1-red\",\n      \"displayName\": \"Style 1 Bowling Shirt 1 Red\"\n    },\n    {\n      \"value\": \"torso_style-1-combat-vest-red\",\n      \"displayName\": \"Style 1 Combat Vest Red\"\n    },\n    {\n      \"value\": \"torso_style-1-ketchum\",\n      \"displayName\": \"Style 1 Ketchum\"\n    },\n    {\n      \"value\": \"torso_style-1-sport-coat-1-dark\",\n      \"displayName\": \"Style 1 Sport Coat 1 Dark\"\n    },\n    {\n      \"value\": \"torso_style-1-sport-coat-1-gray\",\n      \"displayName\": \"Style 1 Sport Coat 1 Gray\"\n    },\n    {\n      \"value\": \"torso_style-1-tshirt-moz\",\n      \"displayName\": \"Style 1 Tshirt Moz\"\n    },\n    {\n      \"value\": \"torso_style-1-tshirt-union-jack\",\n      \"displayName\": \"Style 1 Tshirt Union Jack\"\n    },\n    {\n      \"value\": \"torso_style-1-tshirt1-reactor\",\n      \"displayName\": \"Style 1 Tshirt1 Reactor\"\n    },\n    {\n      \"value\": \"torso_style-1-ugly-christmas-1\",\n      \"displayName\": \"Style 1 Ugly Christmas 1\"\n    },\n    {\n      \"value\": \"torso_style-2-hoodie-1-gray\",\n      \"displayName\": \"Style 2 Hoodie 1 Gray\"\n    },\n    {\n      \"value\": \"torso_style-2-hoodie-2-purple\",\n      \"displayName\": \"Style 2 Hoodie 2 Purple\"\n    },\n    {\n      \"value\": \"torso_style-2-tshirt-1-baby-unicorn\",\n      \"displayName\": \"Style 2 Tshirt 1 Baby Unicorn\"\n    },\n    {\n      \"value\": \"torso_style-2-tshirt-1-heart-animated\",\n      \"displayName\": \"Style 2 Tshirt 1 Heart Animated\"\n    },\n    {\n      \"value\": \"torso_style-2-tshirt-1-heart\",\n      \"displayName\": \"Style 2 Tshirt 1 Heart\"\n    },\n    {\n      \"value\": \"torso_style-2-tshirt-1-moz\",\n      \"displayName\": \"Style 2 Tshirt 1 Moz\"\n    }\n  ]\n};","import React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./game\";\nimport constants from \"./constants\";\nimport initialAssets from \"./assets\";\n\nfunction AvatarPartSelector({ onPartSelected, parts, selected }) {\n  return (\n    <select\n      // TODO: Figure out what to do about single options\n      onChange={(e) => {\n        onPartSelected(e.target.selectedOptions[0].getAttribute(\"value\"));\n      }}\n      value={selected || \"\"}\n    >\n      {parts.map((part, i) => (\n        <option key={i} value={part.value}>\n          {part.displayName}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nfunction App() {\n  const [assets, setAssets] = useState(initialAssets);\n\n  const categories = Object.keys(assets);\n\n  function generateRandomConfig() {\n    const newConfig = {};\n    for (const category of categories) {\n      const categoryAssets = assets[category].filter(part => !part.excludeFromRandomize);\n      if (categoryAssets.length === 0) continue;\n      const randomIndex = Math.floor(Math.random() * categoryAssets.length);\n      newConfig[category] = categoryAssets[randomIndex].value;\n    }\n    return newConfig;\n  }\n\n  const initialAvatarConfig = generateRandomConfig();\n  const [avatarConfig, setAvatarConfig] = useState(initialAvatarConfig);\n\n  function onGLBUploaded(e) {\n    const file = e.target.files[0];\n    const filename = file.name;\n    const category = filename.substring(0, filename.indexOf(\"_\")) || \"custom\";\n    const displayName = filename.substring(filename.indexOf(\"_\") + 1, filename.lastIndexOf(\".\"));\n    const url = URL.createObjectURL(file);\n\n    const clone = { ...assets };\n    clone[category] = clone[category] || [\n      {\n        displayName: \"none\",\n        value: null,\n      },\n    ];\n    clone[category].push({\n      displayName,\n      value: url,\n    });\n    setAssets(clone);\n\n    updateAvatarConfig({ [category]: url });\n  }\n\n  useEffect(() => {\n    document.dispatchEvent(new CustomEvent(constants.avatarConfigChanged, { detail: { avatarConfig } }));\n  });\n\n  function updateAvatarConfig(newConfig) {\n    setAvatarConfig({ ...avatarConfig, ...newConfig });\n  }\n\n  function randomizeConfig() {\n    setAvatarConfig(generateRandomConfig());\n  }\n\n  function dispatchExport() {\n    document.dispatchEvent(new CustomEvent(constants.exportAvatar));\n  }\n\n  function dispatchResetView() {\n    document.dispatchEvent(new CustomEvent(constants.resetView));\n  }\n\n  return (\n    <>\n      {categories.map((category) => (\n        <div key={category} className=\"category\">\n          <span>{category}: </span>\n          <AvatarPartSelector\n            selected={avatarConfig[category]}\n            onPartSelected={(selection) => {\n              updateAvatarConfig({ [category]: selection });\n            }}\n            parts={assets[category]}\n          />\n        </div>\n      ))}\n      <button onClick={randomizeConfig}>Randomize avatar</button>\n      <button onClick={dispatchExport}>Export avatar</button>\n      <button onClick={dispatchResetView}>Reset camera view</button>\n      <label>\n        Upload custom part:\n        <input onChange={onGLBUploaded} type=\"file\" id=\"input\" accept=\"model/gltf-binary,.glb\"></input>\n      </label>\n    </>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n// It's empty as some runtime module handles the default behavior\n__webpack_require__.x = x => {}\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\nvar deferredModules = [\n\t[498,536]\n];\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = x => {};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime, executeModules] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk\"] = self[\"webpackChunk\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = x => {};\n\t}\n\treturn result;\n}\nvar startup = __webpack_require__.x;\n__webpack_require__.x = () => {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = startup || (x => {});\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};","// run startup\n__webpack_require__.x();\n"],"sourceRoot":""}